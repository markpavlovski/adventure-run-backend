const TABLE_NAME = 'checkpoints'

exports.seed = function(knex, Promise) {
  return knex(TABLE_NAME).del()
    .then(() => {
      return knex(TABLE_NAME).insert(checkpointData)
    })
    .then(() => {
      return knex.raw(`SELECT setval('${TABLE_NAME}_id_seq', (SELECT MAX(id) FROM ${TABLE_NAME}));`)
    })
}

const BALLARD_TO_DOWNTOWN = [
  '-122.3848522, 47.6676994',
  '-122.3765306, 47.661705',
  '-122.3761672, 47.6557983',
  '-122.3864347, 47.6558995',
  '-122.3820519, 47.646184',
  '-122.3819929, 47.6419319',
  '-122.3778033, 47.6315903',
  '-122.3777604, 47.6268761',
  '-122.366133, 47.622259',
  '-122.3551869, 47.6150416',
  '-122.3474246, 47.6108864',
  '-122.3435998, 47.6086749',
  '-122.3417772, 47.6081215',
  '-122.3405468, 47.6087029'
].map(el => el.split(', ').reverse().join(', '))

const GREEN_LAKE = [
  '47.68149, -122.32894',
  '47.68215, -122.33998',
  '47.67553, -122.34627',
  '47.67163, -122.34238',
  '47.67574, -122.33385',
  '47.68003, -122.32940'
]

const ALL_THE_PARKS = [
  '-122.3194980, 47.6179810',
  '-122.3190093, 47.6253467',
  '-122.3145890, 47.6287560',
  '-122.3157263, 47.6318587',
  '-122.3101205, 47.6323639',
  '-122.3073538, 47.6323856',
  '-122.3054963, 47.6351799',
  '-122.3059040, 47.6365029',
  '-122.3048258, 47.6375512',
  '-122.3044449, 47.6379235',
  '-122.3021275, 47.6395265',
  '-122.2968744, 47.6395130',
  '-122.2947004, 47.6397976',
  '-122.2921121, 47.6420331',
  '-122.2903512, 47.6468337',
  '-122.3009956, 47.6468544',
  '-122.3044315, 47.6470622',
  '-122.3039326, 47.6495161'
].map(el => el.split(', ').reverse().join(', '))


const TROLL_THRU = [
  '-122.3510912, 47.6514043',
  '-122.3473227, 47.6510013',
  '-122.3427308, 47.6505153',
  '-122.3427844, 47.6484193',
  '-122.3363793, 47.6453149',
  '-122.3329756, 47.646943',
  '-122.3331499, 47.6476423',
  '-122.3314762, 47.6505153',
  '-122.3223889, 47.6542229',
  '-122.3174268, 47.6530756',
  '-122.3137629, 47.6515633',
  '-122.3101151, 47.6484048',
  '-122.304697, 47.6478411',
  '-122.3040533, 47.6494601',
].map(el => el.split(', ').reverse().join(', '))

const MONTLAKE_BRIDGE_LOOP = [
  '-122.304697, 47.6478411',
  '-122.3100293, 47.6485638',
  '-122.3137629, 47.6515633',
  '-122.3184836, 47.6551696',
  '-122.3212838, 47.6515127',
  '-122.3170781, 47.6469014',
  '-122.3124003, 47.6410537',
  '-122.3073363, 47.642044',
  '-122.3049331, 47.6449498',
  '-122.3096967, 47.6463232',
  '-122.3046327, 47.6472845',
].map(el => el.split(', ').reverse().join(', '))


const EASTLAKE_STAIRS = [
  '-122.322331, 47.634961',
  '-122.3211953, 47.6350227',
  '-122.320447, 47.6350371',
  '-122.3181081, 47.6350606',
  '-122.3173571, 47.6360728',
  '-122.317636, 47.6395573',
  '-122.3179579, 47.6425355',
  '-122.3182905, 47.6432475',
  '-122.3170674, 47.6436415',
  '-122.3171264, 47.6468581',
  '-122.3227751, 47.6519608',
  '-122.3252964, 47.64787',
  '-122.3270345, 47.6456365',
  '-122.3265409, 47.6431861',
  '-122.3294109, 47.6420765',
  '-122.3294377, 47.6397163',
  '-122.3270237, 47.6347642',
  '-122.3272061, 47.6320819',
  '-122.3250282, 47.6322555',
  '-122.3234028, 47.6349088',
].map(el => el.split(', ').reverse().join(', '))


const tracks = [GREEN_LAKE,BALLARD_TO_DOWNTOWN,ALL_THE_PARKS,TROLL_THRU,MONTLAKE_BRIDGE_LOOP,EASTLAKE_STAIRS]

const checkpointData = tracks.reduce((acc,track,trackId) => {
  const checkpoints = track.map((latlong,id) => ({
      id: acc.length + id + 1,
      latlong,
      track_id: trackId + 1,
      order: id,
      title: '',
      description: ''
    })
  )
  return [...acc, ...checkpoints]
}, [])
